I"((function() {
  Storytime.Dashboard.CharacterCounter = (function() {
    function CharacterCounter() {}

    CharacterCounter.prototype.init = function() {
      var self;
      self = this;
      return $(".character-limit").each(function() {
        var contenteditable, display, input, limit;
        display = $(this).find(".character-limit-display");
        limit = display.data("limit");
        input = $(this).find(".character-limit-input");
        contenteditable = $(this).find(".character-limit-contenteditable");
        self.setText(display, limit, input);
        if (contenteditable.length > 0) {
          return self.bind(contenteditable, input, display, limit);
        } else {
          return self.bind(input, input, display, limit);
        }
      });
    };

    CharacterCounter.prototype.setText = function(display, limit, input) {
      return display.html(limit - input.val().length);
    };

    CharacterCounter.prototype.bind = function(field, input, display, limit) {
      return field.keypress(function(e) {
        if ((e.which === 32 || e.which > 0x20) && (input.val().length > limit - 1)) {
          e.preventDefault();
        }
      }).keyup(function() {
        display.html(limit - input.val().length);
      });
    };

    return CharacterCounter;

  })();

}).call(this);
:ET